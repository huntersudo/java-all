
CH9  - 默认方法，改进api
CH10 - java.util.Optional


## CH9  - 默认方法，改进api

针对类库设计者,更新接口会，要考虑已经安装自身需求实现了这些接口的代码

- java 8允许接口内声明静态方法: 可以取代工具类中的各个静态方法
- java8 允许接口中有默认方法,指定接口方法的默认实现

不同类型的兼容性
- 二进制级的兼容性 , 链接、运行
- 源代码的兼容性, compile is ok
- 函数行为的兼容性，input/out

```
public interface Sized{
        int size();
        default boolean isEmpty(){   // default method ,源码兼容
            return size()==0;;
        }
}

```

### 默认方法使用
除了类库设计，其他的使用场景：可选方法，行为的多继承
#### 1 可选方法
如上，所有的实现类不需要再实声明一个空remove方法了

#### 2 行为的多继承
默认方法是的，java可以支持多继承
- 类型的多继承
- 利用正交方精简接口,类似于模板设计

关于继承：不应该成为代码复用的万能，完全可以使用代有效地规避这种，通过创建一个方法通过该类的成员变量直接调用该类的方法

### 解决冲突的规则
有可能一个类继承了多个方法而它们使用却是同样的函数签名
三条原则：
- 1.类中的方法 优先级最高，高于任何默认方法
- 2.如果无法依据第一条判断，那么子接口的优先级更高: 函数签名相同时，优先级选择最具体实现的默认方法的接口，即如果B继承了A，则B就比A更加具体
- 3.最后，如果还是无法判断，继承了多个接口的类必须通过显示覆盖和调用期望方法

```
  public class C implements B,A {
        void hello(){
            B.super.hello();  //显示调用  x.super.method(……)
        }
        
    }
```
